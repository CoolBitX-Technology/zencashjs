var zencashjs = require('..')
var chai = require('chai')
var expect = chai.expect

it('serializeTx() should be deterministic', function () {
  // block hash: 00000001cf4e27ce1dd8028408ed0a48edd445ba388170c9468ba0d42fff3052
  // block height: 142091
  var txobj = zencashjs.transaction.createRawTx([{txid: '2704a392f88573cb26775e6cf394e4039b430a2375becac454e3e57c88aed59d', vout: 0}], [{address: 'znkz4JE6Y4m8xWoo4ryTnpxwBT5F7vFDgNf', satoshis: 100000}])
  var txobj_serialized = zencashjs.transaction.serializeTx(txobj)

  expect(txobj_serialized).to.equal('01000000019dd5ae887ce5e354c4cabe75230a439b03e494f36c5e7726cb7385f892a304270000000000ffffffff01a0860100000000003f76a914da46f44467949ac9321b16402c32bbeede5e3e5f88ac205230ff2fd4a08b46c9708138ba45d4ed480aed088402d81dce274ecf01000000030b2b02b400000000')
})

/* 
 * rawsig = '4712e81d796f306156ee99b27b4a6efd64e0c58ef052a73b54039c04ca2f1e624672a818cb62fd751cb51414f7117bec303c6543960b697ad60568f5377f8387'
 * txobj = z.transaction.createRawTx([{txid: '2704a392f88573cb26775e6cf394e4039b430a2375becac454e3e57c88aed59d', vout: 0}], [{address: 'znkz4JE6Y4m8xWoo4ryTnpxwBT5F7vFDgNf', satoshis: 100000}])
 * tx0 = z.transaction.signTx(txobj, 0, '2c3a48576fe6e8a466e78cd2957c9dc62128135540bbea0685d7c4a23ea35a6c') 
 */

 // zen-cli createrawtransaction '[{"txid": "2704a392f88573cb26775e6cf394e4039b430a2375becac454e3e57c88aed59d", "vout": 0}]' '{"znkz4JE6Y4m8xWoo4ryTnpxwBT5F7vFDgNf": 0.001}'
 // hex: 01000000019dd5ae887ce5e354c4cabe75230a439b03e494f36c5e7726cb7385f892a304270000000000ffffffff01a0860100000000003f76a914da46f44467949ac9321b16402c32bbeede5e3e5f88ac205230ff2fd4a08b46c9708138ba45d4ed480aed088402d81dce274ecf01000000030b2b02b400000000
 // zen-cli signrawtransaction 01000000019dd5ae887ce5e354c4cabe75230a439b03e494f36c5e7726cb7385f892a304270000000000ffffffff01a0860100000000003f76a914da46f44467949ac9321b16402c32bbeede5e3e5f88ac205230ff2fd4a08b46c9708138ba45d4ed480aed088402d81dce274ecf01000000030b2b02b400000000 '[{"txid": "2704a392f88573cb26775e6cf394e4039b430a2375becac454e3e57c88aed59d", "vout": 0, "scriptPubKey": "76a914da46f44467949ac9321b16402c32bbeede5e3e5f88ac20ebd78933082d25d56a47d471ee5d57793454cf3d2787f77c21f9964b02000000034f2902b4"}]' '["5J9mKPd531Tk4A73kKp4iowoi6EvhEp8QSMAVzrZhuzZkdpYbK8"]' 
 // hex: 01000000019dd5ae887ce5e354c4cabe75230a439b03e494f36c5e7726cb7385f892a30427000000008b483045022100a3b67c1c36a1aad6ca28802441476ab4bd9dcbb35f51dcad1610e11fcc6e275b02203bbc01cf928435b2e93bc4cc07a551ac4f1e54f47d81d9ec47db9ec9e64739f10141048a789e0910b6aa314f63d2cc666bd44fa4b71d7397cb5466902dc594c1a0a0d2e4d234528ff87b83f971ab2b12cd2939ff33c7846716827a5b0e8233049d8aadffffffff01a0860100000000003f76a914da46f44467949ac9321b16402c32bbeede5e3e5f88ac205230ff2fd4a08b46c9708138ba45d4ed480aed088402d81dce274ecf01000000030b2b02b400000000
